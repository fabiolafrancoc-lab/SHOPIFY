{% comment %}
  STEP 1: Migrant Registration Form
  This section is embedded as page content in Shopify Pages > registro
  OR used as a standalone section in the page template.
{% endcomment %}

<h1 class="sc-page-title">¡Cuida a tu familia hoy!</h1>
<p class="sc-page-subtitle">
  Primero cuéntanos de ti.<br>
  <strong style="color: var(--cyan);">Primer mes completamente gratis.</strong>
</p>

<form class="sc-form" id="form-step1" action="/pages/familia" method="get" onsubmit="handleStep1(event)">

  <p class="sc-section-title">Tus datos — Estás en EE.UU.</p>

  <div class="sc-field">
    <label class="sc-label" for="nombre">Tu nombre *</label>
    <input class="sc-input" type="text" id="nombre" name="nombre" placeholder="Juan" required>
  </div>

  <div class="sc-field">
    <label class="sc-label" for="apellido">Tu apellido *</label>
    <input class="sc-input" type="text" id="apellido" name="apellido" placeholder="García" required>
  </div>

  <div class="sc-field">
    <label class="sc-label" for="email">Tu correo electrónico *</label>
    <input class="sc-input" type="email" id="email" name="email" placeholder="juan@gmail.com" required>
  </div>

  <div class="sc-field">
    <label class="sc-label" for="fecha_nacimiento">Tu fecha de nacimiento *</label>
    <input class="sc-input" type="date" id="fecha_nacimiento" name="fecha_nacimiento" required>
  </div>

  <div class="sc-field">
    <label class="sc-label" for="telefono">WhatsApp (EE.UU.) *</label>
    <input class="sc-input" type="tel" id="telefono" name="telefono" placeholder="+1 (555) 123-4567" required>
  </div>

  <input type="hidden" id="plan" name="plan" value="basico">

  <!-- Plan Summary -->
  <div class="sc-summary">
    <p class="sc-summary-title">Resumen de tu plan</p>
    <div class="sc-summary-row">
      <span class="sc-summary-label">Hoy pagas</span>
      <span class="sc-summary-value free">$0.00 — GRATIS</span>
    </div>
    <div class="sc-summary-row">
      <span class="sc-summary-label">SaludCompartida Familiar</span>
      <span class="sc-summary-value price">$12/mes</span>
    </div>
    <div class="sc-summary-row">
      <span class="sc-summary-label">Primer cobro</span>
      <span class="sc-summary-value">En 30 días</span>
    </div>
    <div class="sc-summary-row">
      <span class="sc-summary-label">Personas cubiertas</span>
      <span class="sc-summary-value">Hasta 4 en México</span>
    </div>
  </div>

  <button type="submit" class="cta-primary" style="animation: none;">
    Continuar — Agregar mi familia
  </button>

  <div class="cta-subtext">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
      <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
    </svg>
    Datos protegidos con encriptación de 256 bits
  </div>

</form>

<script>
function handleStep1(e) {
  e.preventDefault();
  const form = document.getElementById('form-step1');
  const data = {
    nombre: document.getElementById('nombre').value,
    apellido: document.getElementById('apellido').value,
    email: document.getElementById('email').value,
    telefono: document.getElementById('telefono').value,
    fecha_nacimiento: document.getElementById('fecha_nacimiento').value,
    plan: document.getElementById('plan').value
  };
  // Save to sessionStorage to pass between pages
  sessionStorage.setItem('sc_step1', JSON.stringify(data));
  window.location.href = '/pages/familia';
}
</script>

{% schema %}
{
  "name": "Registro Step 1",
  "settings": []
}
{% endschema %}
