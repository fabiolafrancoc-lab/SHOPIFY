<style>
:root {
  --bg-dark: #0a0a0a;
  --bg-light: #1a1a2E;
  --cyan: #06B6D4;
  --magenta: #EC4899;
  --green: #10B981;
  --navy-card: #16162a;
  --text-primary: #FFFFFF;
  --text-secondary: rgba(255,255,255,0.75);
  --text-muted: rgba(255,255,255,0.5);
}

*{margin:0;padding:0;box-sizing:border-box;}
html{scroll-behavior:smooth;}

body {
  font-family: 'DM Sans', -apple-system, sans-serif;
  background: linear-gradient(180deg, #0a0a0a 0%, #1a1a2E 100%);
  color: #FFFFFF;
  min-height: 100vh;
  -webkit-font-smoothing: antialiased;
}

.serif { font-family: 'Instrument Serif', Georgia, serif; }

/* Confetti */
.confetti-container {
  position: fixed; top: 0; left: 0;
  width: 100%; height: 100%;
  pointer-events: none; z-index: 1000; overflow: hidden;
}
.confetti {
  position: absolute; width: 10px; height: 10px;
  opacity: 0; animation: confetti-fall 4s ease-out forwards;
}
@keyframes confetti-fall {
  0%   { opacity: 1; transform: translateY(-100px) rotate(0deg); }
  100% { opacity: 0; transform: translateY(100vh)  rotate(720deg); }
}

/* Nav */
.nav {
  position: sticky; top: 0;
  background: rgba(10,10,10,0.95);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid rgba(255,255,255,0.1);
  z-index: 100; padding: 16px 20px;
}
.nav-inner {
  max-width: 1200px; margin: 0 auto;
  display: flex; justify-content: center; align-items: center;
}
.nav-brand {
  font-family: 'DM Sans', sans-serif;
  font-size: 22px; font-weight: 700;
  color: #fff; text-decoration: none;
}
.nav-brand span { color: var(--cyan); }

/* Page */
.success-page {
  max-width: 800px; margin: 0 auto;
  padding: 40px 20px 80px;
  display: flex; flex-direction: column; align-items: center;
}

/* Header */
.success-header { text-align: center; margin-bottom: 40px; }
.success-icon {
  width: 100px; height: 100px;
  background: linear-gradient(135deg, var(--green), #059669);
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  margin: 0 auto 24px;
  animation: pulse-success 2s ease-in-out infinite;
  box-shadow: 0 0 40px rgba(16,185,129,0.4);
}
.success-icon svg { width: 50px; height: 50px; color: white; }
@keyframes pulse-success {
  0%,100% { transform: scale(1);    box-shadow: 0 0 40px rgba(16,185,129,0.4); }
  50%      { transform: scale(1.05); box-shadow: 0 0 60px rgba(16,185,129,0.6); }
}
.success-title {
  font-size: 42px; font-weight: 400; margin-bottom: 12px;
  background: linear-gradient(135deg, var(--green) 0%, var(--cyan) 100%);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  background-clip: text;
}
.success-subtitle { font-size: 20px; color: var(--text-secondary); }

/* Personalised greeting */
.greeting-name {
  margin-top: 10px;
  font-size: 16px; color: var(--text-muted);
  display: none; /* shown by JS when name is available */
}

/* Gratitude section ‚Äî handwritten signatures */
.gratitude-section {
  width: 100%; max-width: 900px;
  margin-bottom: 48px; padding: 40px 20px;
  background: linear-gradient(135deg, rgba(22,22,42,0.8), rgba(10,10,10,0.9));
  border-radius: 24px;
  border: 1px solid rgba(255,255,255,0.1);
}
.gratitude-intro {
  text-align: center; color: var(--text-muted);
  font-size: 16px; margin-bottom: 32px; font-style: italic;
}
.signatures-cloud {
  display: flex; flex-wrap: wrap;
  justify-content: center; align-items: center;
  gap: 12px 20px; min-height: 300px; padding: 20px;
}
.signature {
  display: inline-block; padding: 4px 12px;
  transition: transform 0.3s ease; cursor: default;
}
.signature:hover { transform: scale(1.15) !important; }
.sig-child { font-family: 'Comic Sans MS', 'Marker Felt', cursive; font-size: 20px; }
.sig-1  { color:#60A5FA; transform:rotate(-5deg); }
.sig-2  { color:#1E3A5F; transform:rotate(3deg);  font-size:18px; }
.sig-3  { color:#DC2626; transform:rotate(-2deg); font-size:24px; }
.sig-4  { color:#7C3AED; transform:rotate(4deg); }
.sig-5  { color:#059669; transform:rotate(-6deg); font-size:22px; }
.sig-6  { color:#60A5FA; transform:rotate(2deg);  font-size:19px; }
.sig-7  { color:#EC4899; transform:rotate(-3deg); font-size:21px; }
.sig-8  { color:#1E3A5F; transform:rotate(5deg);  font-size:17px; }
.sig-17 { color:#DC2626; transform:rotate(-4deg); font-size:20px; }
.sig-18 { color:#7C3AED; transform:rotate(3deg);  font-size:23px; }
.sig-21 { color:#059669; transform:rotate(-2deg); font-size:18px; }
.sig-22 { color:#60A5FA; transform:rotate(4deg);  font-size:22px; }
.sig-elder { font-family: 'Brush Script MT','Segoe Script',cursive; font-size:26px; }
.sig-9  { color:#A78BFA; transform:rotate(2deg); }
.sig-10 { color:#34D399; transform:rotate(-3deg); font-size:24px; }
.sig-11 { color:#F472B6; transform:rotate(4deg); }
.sig-12 { color:#60A5FA; transform:rotate(-2deg); font-size:28px; }
.sig-13 { color:#FCD34D; transform:rotate(3deg);  font-size:25px; }
.sig-14 { color:#A78BFA; transform:rotate(-4deg); }
.sig-15 { color:#34D399; transform:rotate(2deg);  font-size:23px; }
.sig-16 { color:#F472B6; transform:rotate(-3deg); font-size:27px; }
.sig-19 { color:#60A5FA; transform:rotate(3deg);  font-size:24px; }
.sig-20 { color:#FCD34D; transform:rotate(-2deg); font-size:26px; }
.sig-23 { color:#A78BFA; transform:rotate(4deg);  font-size:25px; }
.sig-24 { color:#34D399; transform:rotate(-3deg); }

/* "Codes on the way" banner */
.codes-banner {
  width: 100%; max-width: 600px;
  margin-bottom: 40px;
  background: var(--navy-card);
  border-radius: 24px;
  padding: 36px 32px;
  border: 1px solid rgba(255,255,255,0.08);
  text-align: center;
}
.codes-banner-title {
  font-size: 22px; font-weight: 700;
  margin-bottom: 8px;
}
.codes-banner-subtitle {
  font-size: 15px; color: var(--text-muted);
  margin-bottom: 32px;
}
.delivery-channels {
  display: flex; justify-content: center; gap: 20px;
  flex-wrap: wrap;
}
.channel-card {
  flex: 1; min-width: 140px; max-width: 220px;
  background: rgba(255,255,255,0.04);
  border-radius: 16px; padding: 24px 16px;
  border: 1px solid rgba(255,255,255,0.06);
}
.channel-icon { font-size: 36px; margin-bottom: 10px; }
.channel-label {
  font-size: 14px; font-weight: 600;
  color: var(--text-primary); margin-bottom: 4px;
}
.channel-desc { font-size: 13px; color: var(--text-muted); line-height: 1.5; }
.channel-card.email-card  { border-top: 3px solid var(--cyan); }
.channel-card.whatsapp-card { border-top: 3px solid #25D366; }

/* Next steps */
.next-steps {
  width: 100%; max-width: 600px;
  margin-bottom: 40px;
}
.next-steps-title {
  text-align: center; font-size: 20px; font-weight: 600;
  margin-bottom: 24px; color: var(--text-primary);
}
.step-item {
  display: flex; gap: 16px; padding: 20px;
  background: var(--navy-card); border-radius: 16px;
  margin-bottom: 12px;
  border: 1px solid rgba(255,255,255,0.05);
  align-items: flex-start;
}
.step-num {
  width: 36px; height: 36px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0; font-size: 15px; font-weight: 700;
  background: linear-gradient(135deg, var(--cyan), #0891B2);
  color: #fff;
}
.step-content h4 {
  font-size: 16px; font-weight: 600;
  color: var(--text-primary); margin-bottom: 4px;
}
.step-content p { font-size: 14px; color: var(--text-muted); line-height: 1.6; }
.step-content a { color: var(--cyan); font-weight: 600; text-decoration: none; }
.step-content a:hover { text-decoration: underline; }

/* CTA */
.cta-block { text-align: center; }
.cta-button {
  display: inline-flex; align-items: center;
  justify-content: center; gap: 12px;
  background: linear-gradient(135deg, var(--magenta), #BE185D);
  color: white; font-size: 18px; font-weight: 700;
  padding: 18px 48px; border-radius: 16px;
  border: none; cursor: pointer;
  text-decoration: none; transition: all 0.3s ease;
  box-shadow: 0 8px 32px rgba(236,72,153,0.35);
}
.cta-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 40px rgba(236,72,153,0.5);
  color: white;
}
.cta-sub {
  margin-top: 14px; font-size: 13px;
  color: var(--text-muted);
}

/* Free trial note */
.trial-note {
  width: 100%; max-width: 600px;
  margin-bottom: 36px;
  background: rgba(16,185,129,0.07);
  border: 1px solid rgba(16,185,129,0.2);
  border-radius: 16px; padding: 20px 24px;
  display: flex; gap: 14px; align-items: flex-start;
}
.trial-note-icon { font-size: 26px; flex-shrink: 0; }
.trial-note-text { font-size: 14px; color: rgba(255,255,255,0.85); line-height: 1.7; }
.trial-note-text strong { color: #10B981; }

@media (max-width: 640px) {
  .success-title   { font-size: 28px; }
  .signatures-cloud{ gap: 8px 14px; min-height: 260px; }
  .signature       { padding: 2px 8px; }
  .sig-child       { font-size: 16px !important; }
  .sig-elder       { font-size: 20px !important; }
  .codes-banner    { padding: 28px 20px; }
  .delivery-channels { gap: 12px; }
  .cta-button      { width: 100%; padding: 16px 24px; font-size: 16px; }
}
</style>

<!-- Confetti -->
<div class="confetti-container" id="confetti-container"></div>

<!-- Nav -->
<nav class="nav">
  <div class="nav-inner">
    {% if settings.logo %}
      <img src="{{ settings.logo | img_url: '200x' }}" alt="SaludCompartida" style="height:36px">
    {% else %}
      <a href="/" class="nav-brand">Salud<span>Compartida</span></a>
    {% endif %}
  </div>
</nav>

<div class="success-page">

  <!-- ‚ë† Success header -->
  <div class="success-header">
    <div class="success-icon">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
        <polyline points="20 6 9 17 4 12"/>
      </svg>
    </div>
    <h1 class="success-title serif">¬°Pago exitoso!</h1>
    <p class="success-subtitle">Tu familia en M√©xico ya est√° protegida</p>
    <p class="greeting-name" id="greeting-name"></p>
  </div>

  <!-- ‚ë° Gratitude wall ‚Äî handwritten signatures -->
  <div class="gratitude-section">
    <p class="gratitude-intro">Esto es lo que las familias quieren decirte...</p>
    <div class="signatures-cloud">
      <span class="signature sig-child sig-1">Gracias pap√°</span>
      <span class="signature sig-child sig-2">gracias mami</span>
      <span class="signature sig-child sig-3">Grasias Papa</span>
      <span class="signature sig-child sig-4">te quiero mam√°</span>
      <span class="signature sig-child sig-5">GRACIAS T√çO</span>
      <span class="signature sig-child sig-6">gracias papi</span>
      <span class="signature sig-child sig-7">Te extra√±o</span>
      <span class="signature sig-child sig-8">grasias mama</span>
      <span class="signature sig-elder sig-9">Gracias, mijo</span>
      <span class="signature sig-elder sig-10">Bendiciones, mijita</span>
      <span class="signature sig-elder sig-11">Gracias, mi ni√±o</span>
      <span class="signature sig-elder sig-12">Dios te bendiga, hija</span>
      <span class="signature sig-elder sig-13">Mil gracias, mijo</span>
      <span class="signature sig-elder sig-14">Te quiero mucho, mijita</span>
      <span class="signature sig-elder sig-15">Gracias por no olvidarnos</span>
      <span class="signature sig-elder sig-16">Que Dios te lo pague</span>
      <span class="signature sig-child sig-17">ya no me duele</span>
      <span class="signature sig-child sig-18">Gracias Papito</span>
      <span class="signature sig-child sig-21">tenkiu mami</span>
      <span class="signature sig-child sig-22">gracias por la mesina</span>
      <span class="signature sig-elder sig-19">Siempre en mi coraz√≥n</span>
      <span class="signature sig-elder sig-20">Gracias por cuidarnos</span>
      <span class="signature sig-elder sig-23">Te recordamos siempre</span>
      <span class="signature sig-elder sig-24">Eres nuestra bendici√≥n</span>
    </div>
  </div>

  <!-- ‚ë¢ Free trial confirmation -->
  <div class="trial-note">
    <div class="trial-note-icon">üéÅ</div>
    <div class="trial-note-text">
      <strong>Primer mes completamente gratis.</strong> No se realizar√° ning√∫n cargo hoy.
      A partir del d√≠a 31, se cobrar√°n <strong>$12 USD/mes</strong> autom√°ticamente.
      Cancela cuando quieras sin penalizaciones.
    </div>
  </div>

  <!-- ‚ë£ Codes on the way -->
  <div class="codes-banner">
    <div class="codes-banner-title">üöÄ Tus c√≥digos van en camino</div>
    <div class="codes-banner-subtitle">
      En los pr√≥ximos minutos recibir√°s todo lo que necesitas
    </div>
    <div class="delivery-channels">
      <div class="channel-card email-card">
        <div class="channel-icon">üìß</div>
        <div class="channel-label">Tu email</div>
        <div class="channel-desc">Tu c√≥digo de acceso + instrucciones para el migrante</div>
      </div>
      <div class="channel-card whatsapp-card">
        <div class="channel-icon">üì±</div>
        <div class="channel-label">WhatsApp M√©xico</div>
        <div class="channel-desc">El c√≥digo de tu familia directo a su celular</div>
      </div>
    </div>
  </div>

  <!-- ‚ë§ Next steps -->
  <div class="next-steps">
    <h3 class="next-steps-title">¬øQu√© sigue?</h3>

    <div class="step-item">
      <div class="step-num">1</div>
      <div class="step-content">
        <h4>Revisa tu email y WhatsApp</h4>
        <p>Te llegar√° un correo con tu c√≥digo personal y un WhatsApp llegar√° a tu familia en M√©xico con su c√≥digo.</p>
      </div>
    </div>

    <div class="step-item">
      <div class="step-num">2</div>
      <div class="step-content">
        <h4>Entra a SaludCompartida</h4>
        <p>Ve a <a href="https://saludcompartida.app" target="_blank">saludcompartida.app</a>, ingresa tu c√≥digo y accede directamente a tu panel.</p>
      </div>
    </div>

    <div class="step-item">
      <div class="step-num">3</div>
      <div class="step-content">
        <h4>Comparte el c√≥digo con tu familia</h4>
        <p>Tu familia en M√©xico usa su c√≥digo en la misma app para acceder a telemedicina, farmacia y a su compa√±√≠a (Lupita o Fernanda).</p>
      </div>
    </div>

    <div class="step-item">
      <div class="step-num">4</div>
      <div class="step-content">
        <h4>Llamada de bienvenida</h4>
        <p>En las pr√≥ximas 24 horas, Lupita o Fernanda llamar√° a tu familia para presentarse y asegurarse de que todo funcione.</p>
      </div>
    </div>
  </div>

  <!-- ‚ë• CTA ‚Üí saludcompartida.app -->
  <div class="cta-block">
    <a href="https://saludcompartida.app" target="_blank" class="cta-button">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
        <polyline points="15 3 21 3 21 9"/>
        <line x1="10" y1="14" x2="21" y2="3"/>
      </svg>
      Ir a saludcompartida.app
    </a>
    <p class="cta-sub">Tendr√°s tu c√≥digo en el email en unos minutos</p>
  </div>

</div><!-- /.success-page -->

<script>
(function() {
  // Spawn confetti
  var container = document.getElementById('confetti-container');
  var colors = ['#06B6D4','#EC4899','#10B981','#F59E0B','#8B5CF6'];
  for (var i = 0; i < 100; i++) {
    var el = document.createElement('div');
    el.className = 'confetti';
    el.style.left            = (Math.random() * 100) + '%';
    el.style.animationDelay  = (Math.random() * 3)   + 's';
    el.style.backgroundColor = colors[Math.floor(Math.random() * 5)];
    el.style.borderRadius    = Math.random() > 0.5 ? '50%' : '0';
    container.appendChild(el);
  }
  setTimeout(function() { container.style.display = 'none'; }, 6500);

  // Personalise greeting if first_name is in URL (passed by Shopify Additional Scripts)
  var params    = new URLSearchParams(window.location.search);
  var firstName = params.get('nombre') || params.get('first_name');
  if (firstName) {
    var el = document.getElementById('greeting-name');
    el.textContent = '¬°Bienvenido, ' + firstName + '!';
    el.style.display = 'block';
  }
})();
</script>
